var v=Object.defineProperty;var x=(s,t,e)=>t in s?v(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var o=(s,t,e)=>x(s,typeof t!="symbol"?t+"":t,e);import{j as n}from"./index-D29X56GZ.js";import{g as f,I as m,r as w}from"./InteractiveCanvasFrame-DukYkY40.js";import{p as r}from"./p5.min-BFlUKbsV.js";class u{constructor(t,e){o(this,"pos");o(this,"vel");o(this,"acc");o(this,"prevPos");o(this,"p");o(this,"scale");o(this,"cols");this.pos=new r.Vector(Math.random()*t.width,Math.random()*t.height),this.vel=new r.Vector,this.acc=new r.Vector,this.prevPos=this.pos.copy(),this.p=t,this.scale=e,this.cols=this.p.width/e}show(){const t=this.p.map(this.pos.x,0,this.p.width,0,255),e=this.p.map(this.acc.mag(),0,.5,0,255),h=this.p.map(this.vel.y,-2,2,255,0);this.p.stroke(t,e,h,50),this.p.strokeWeight(1),this.p.line(this.prevPos.x,this.prevPos.y,this.pos.x,this.pos.y),this.updatePrev()}updatePrev(){this.prevPos.x=this.pos.x,this.prevPos.y=this.pos.y}update(){this.vel.add(this.acc),this.vel.limit(2),this.pos.add(this.vel),this.acc.mult(0)}follow(t){const e=Math.floor(this.pos.x/this.scale),h=Math.floor(this.pos.y/this.scale),i=e+h*this.cols,a=t[i];if(a){const p=a.vector;this.acc.add(p)}}edges(){this.pos.x>this.p.width&&(this.pos.x=0,this.updatePrev()),this.pos.x<0&&(this.pos.x=this.p.width,this.updatePrev()),this.pos.y>this.p.height&&(this.pos.y=0,this.updatePrev()),this.pos.y<0&&(this.pos.y=this.p.height,this.updatePrev())}}function g(s){const t=[],h=[];s.setup=()=>{const{width:i,height:a}=f();s.createCanvas(i,a);for(let c=0;c<1e3;c++)t.push(new u(s,5));let p=0,d=0;for(let c=0;c<s.height/5;c++){d+=.1;for(let l=0;l<s.width/5;l++)p+=.1,h.push({vector:r.Vector.fromAngle(s.noise(p,d)*r.prototype.TWO_PI*5).setMag(.2),x:l*5,y:c*5})}s.background(0)},s.windowResized=()=>{const{width:i,height:a}=f();s.resizeCanvas(i,a)},s.draw=()=>{s.stroke(0);for(const i of t)i.show(),i.update(),i.edges(),i.follow(h)}}const M=()=>n.jsx("div",{className:"flex flex-col gap-8",children:n.jsx(m,{className:"mx-auto my-4",children:n.jsx(w,{sketch:g})})});export{M as default};
